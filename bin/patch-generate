#!/bin/sh
#set -x
#
# Generate patches
#
if [ ! -x bin/$(basename $0) ]
then
	echo "ERROR: Run this from top level"
	exit 1
fi
. ./config.sh

PATCHDIRS="
	eclipse-platform-parent
	eclipse.platform.releng.tychoeclipsebuilder
	eclipse.platform.resources
	rt.equinox.framework
"
mkdir -p patches

AGGR_MODULE=$(basename $ECLIPSE_AGGR)

for DIR in ${PATCHDIRS}
do
	echo "INFO: Inspecting ${DIR}"
	(
		cd ${AGGR_MODULE}
		diff -ruN ../${AGGR_MODULE}.base/${DIR} ${DIR}
	) > patches/patch-${DIR}
done
